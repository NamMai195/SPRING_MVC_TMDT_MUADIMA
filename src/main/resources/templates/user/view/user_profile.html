<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="/user/layout/head :: head"></head>
<style>
    .login-card {
        background-color: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        width: 100%;
        max-width: 400px;
    }

    .login-card h2 {
        font-weight: bold;
        color: #007bff;
        text-align: center;
        margin-bottom: 20px;
    }
    .form-label {
        font-weight: bold;
    }
    .form-control {
        border-radius: 10px;
    }

    .btn-login {
        background-color: #007bff;
        color: white;
        border-radius: 10px;
        transition: all 0.3s ease-in-out;
    }

    .btn-login:hover {
        background-color: #0056b3;
        transform: scale(1.05);
    }

    .form-check-label {
        font-size: 0.9rem;
    }

    .forgot-password {
        display: block;
        text-align: center;
        font-size: 0.9rem;
        color: #6c757d;
        margin-top: 10px;
        text-decoration: none;
    }

    .forgot-password:hover {
        color: #007bff;
    }
</style>

<body>
<div class="wrapper">
    <!-- Sidebar -->
    <div th:replace="/user/layout/Sidebar :: sidebar"></div>
    <!-- End Sidebar -->

    <div class="main-panel">
        <div th:replace="/user/layout/header :: header"></div>

        <div class="container">
            <div class="container py-3 d-flex justify-content-center align-items-center">
                <div class="container" style="width: 600px">
                    <div class="card">
                        <div class="card-header bg-primary text-white text-center">
                            <h3>Chỉnh sửa hồ sơ</h3>
                        </div>
                        <div class="card-body">
                            <form action="/profileuser" method="POST" enctype="multipart/form-data">
                                <!-- Ảnh đại diện -->
                                <div class="text-center mb-3">
                                    <img id="avatarPreview" th:src="@{'/uploads/'+${user.image}}" alt="Avatar" class="rounded-circle" width="120" height="120">
                                    <br>
                                    <label class="btn btn-secondary mt-2">
                                        Tải ảnh mới <input type="file" name="image" accept="image/*" class="d-none" id="imageInput">
                                    </label>
                                </div>

                                <!-- Họ tên -->
                                <div class="mb-1">
                                    <label class="form-label">Họ và tên</label>
                                    <input type="text" class="form-control" name="name" th:value="${user.name}" required>
                                </div>

                                <!-- Email -->
                                <div class="mb-1">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" name="email" th:value="${user.email}" readonly>
                                </div>

                                <!-- Số điện thoại -->
                                <div class="mb-1">
                                    <label class="form-label">Số điện thoại</label>
                                    <input type="text" class="form-control" name="sdt" th:value="${user.sdt}" required>
                                </div>

                                <!-- Địa chỉ -->
                                <div class="mb-1">
                                    <label class="form-label">Địa chỉ</label>
                                    <input type="text" class="form-control" name="address" th:value="${user.address}">
                                </div>
                                <!-- Nút cập nhật -->
                                <div class="text-center">
                                    <button type="submit" class="btn btn-success">Cập nhật hồ sơ</button>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer th:replace="/user/layout/footer :: footer"></footer>
    </div>

    <!-- Custom template | don't include it in your project! -->
    <div class="custom-template">
        <div class="title">Settings</div>
        <div class="custom-content">
            <div class="switcher">
                <div class="switch-block">
                    <h4>Logo Header</h4>
                    <div class="btnSwitch">
                        <button
                                type="button"
                                class="selected changeLogoHeaderColor"
                                data-color="dark"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="blue"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="purple"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="light-blue"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="green"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="orange"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="red"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="white"
                        ></button>
                        <br />
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="dark2"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="blue2"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="purple2"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="light-blue2"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="green2"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="orange2"
                        ></button>
                        <button
                                type="button"
                                class="changeLogoHeaderColor"
                                data-color="red2"
                        ></button>
                    </div>
                </div>
                <div class="switch-block">
                    <h4>Navbar Header</h4>
                    <div class="btnSwitch">
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="dark"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="blue"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="purple"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="light-blue"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="green"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="orange"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="red"
                        ></button>
                        <button
                                type="button"
                                class="selected changeTopBarColor"
                                data-color="white"
                        ></button>
                        <br />
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="dark2"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="blue2"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="purple2"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="light-blue2"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="green2"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="orange2"
                        ></button>
                        <button
                                type="button"
                                class="changeTopBarColor"
                                data-color="red2"
                        ></button>
                    </div>
                </div>
                <div class="switch-block">
                    <h4>Sidebar</h4>
                    <div class="btnSwitch">
                        <button
                                type="button"
                                class="changeSideBarColor"
                                data-color="white"
                        ></button>
                        <button
                                type="button"
                                class="selected changeSideBarColor"
                                data-color="dark"
                        ></button>
                        <button
                                type="button"
                                class="changeSideBarColor"
                                data-color="dark2"
                        ></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="custom-toggle">
            <i class="icon-settings"></i>
        </div>
    </div>
    <!-- End Custom template -->
</div>
<!-- Import SweetAlert2 -->
<!-- Import SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Lấy thông báo từ Flash Attribute
        let errorMessage = "[[${error}]]";
        let successMessage = "[[${success}]]";

        if (errorMessage && errorMessage !== "null") {
            Swal.fire({
                title: "Lỗi!",
                text: errorMessage,
                icon: "error",
                confirmButtonText: "OK"
            });
        }

        if (successMessage && successMessage !== "null") {
            Swal.fire({
                title: "Thành công!",
                text: successMessage,
                icon: "success",
                confirmButtonText: "OK"
            }).then(() => {
                window.history.replaceState(null, null, window.location.pathname);
            });
        }
    });
</script>


<script>
    // Hiển thị ảnh trước khi upload
    document.getElementById('imageInput').addEventListener('change', function(event) {
        let reader = new FileReader();
        reader.onload = function(){
            document.getElementById('avatarPreview').src = reader.result;
        }
        reader.readAsDataURL(event.target.files[0]);
    });
</script>
<!--   Core JS Files   -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="/assets/js/core/jquery-3.7.1.min.js"></script>
<script src="/assets/js/core/popper.min.js"></script>
<script src="/assets/js/core/bootstrap.min.js"></script>

<!-- jQuery Scrollbar -->
<script src="/assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>

<!-- Chart JS -->
<script src="/assets/js/plugin/chart.js/chart.min.js"></script>

<!-- jQuery Sparkline -->
<script src="/assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js"></script>

<!-- Chart Circle -->
<script src="/assets/js/plugin/chart-circle/circles.min.js"></script>

<!-- Datatables -->
<script src="/assets/js/plugin/datatables/datatables.min.js"></script>

<!-- Bootstrap Notify -->
<script src="/assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>

<!-- jQuery Vector Maps -->
<script src="/assets/js/plugin/jsvectormap/jsvectormap.min.js"></script>
<script src="/assets/js/plugin/jsvectormap/world.js"></script>

<!-- Sweet Alert -->
<script src="/assets/js/plugin/sweetalert/sweetalert.min.js"></script>

<!-- Kaiadmin JS -->
<script src="/assets/js/kaiadmin.min.js"></script>

<!-- Kaiadmin DEMO methods, don't include it in your project! -->
<script src="/assets/js/setting-demo.js"></script>
<script src="/assets/js/demo.js"></script>
<script>
    $("#lineChart").sparkline([102, 109, 120, 99, 110, 105, 115], {
        type: "line",
        height: "70",
        width: "100%",
        lineWidth: "2",
        lineColor: "#177dff",
        fillColor: "rgba(23, 125, 255, 0.14)",
    });

    $("#lineChart2").sparkline([99, 125, 122, 105, 110, 124, 115], {
        type: "line",
        height: "70",
        width: "100%",
        lineWidth: "2",
        lineColor: "#f3545d",
        fillColor: "rgba(243, 84, 93, .14)",
    });

    $("#lineChart3").sparkline([105, 103, 123, 100, 95, 105, 115], {
        type: "line",
        height: "70",
        width: "100%",
        lineWidth: "2",
        lineColor: "#ffa534",
        fillColor: "rgba(255, 165, 52, .14)",
    });
</script>
</body>
</html>
